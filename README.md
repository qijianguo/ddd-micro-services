# ddd-micro-services

## 初衷
领域驱动设计读书笔记，搭建一个基础的DDD微服务框架

---
## 项目结构

---
### interfaces
用户接口层：面向前端提供服务适配，面向资源层提供资源适配。

这一层聚集了接口适配相关的功能。存放数据的组装、数据传输格式以及Facade接口等代码。

接收用户发送的RESTful请求，解析用户输入参数，并传达给`application`层。

* assembler
    
    实现DTO与领域对象之间的相互转换和数据交换。一般assembler与dto会一同出现。

* dto

    dto是数据传输的载体，不包含任何业务逻辑，通过dto把内部的领域对象与外界隔离。

* facade

    提供较粗粒度的调用接口，将用户请求委派给一个或多个应用服务进行处理。

---
### application
应用层：实现服务组合与编排，适应业务流程快速变化的需求。

这一层聚集了应用服务和事件相关的功能。

向下基于**微服务内的领域服务**或**外部微服务的应用服务**完成服务的编排和重组，向上为**用户接口层**提供各种应用数据展现支持服务。

* service（应用服务）

    对多个领域服务或外部服务进行封装、编排和组合，对外提供粗粒度的服务。  

* event （事件）
    * -- publish：事件发布
    * -- subscribe：事件订阅

---
### domain
领域层：实现领域的核心业务逻辑。

这一层聚集了领域模型的聚合、聚合根、实体、值对象、领域服务和事件等领域对象，以及他们组合所形成的业务能力。

领域层可以包含多个聚合代码包，他们共同实现领域模型的核心业务逻辑。

* aggregate（聚合）
    * entity：实体
        
        存放聚合根、实体、值对象以及工厂模式的相关代码；
        
        实体采用充血模型，同一实体相关的业务逻辑都放在实体类代码中实现；
        
    * event：事件
    
        存放事件实体以及与事件活动相关的业务逻辑代码。
    
    * service：领域服务
    
        跨实体的业务逻辑代码放在领域服务中实现；
        
        一个领域服务是多个实体组合出来的业务逻辑；
        
        领域服务封装多个实体或方法后向上层提供应用服务调用。
    
    * repository：仓储
    
        存放所在聚合的查询和持久化领域对象的代码，通常包括仓储接口和仓储实现方法；
        
        为了方便聚合的拆分和组合，则采用一个聚合对应一个仓储的原则。

* aggregate 
    * ...
---
### infrastructure
基础层：为其他层提供基础资源服务。

这一层聚集了各种底层资源相关的服务和能力。

基础层为其他层提供如通用的技术能力、三方软件包、数据库服务、配置、和基础资源服务。

* config：配置相关代码

* util：工具
    * api
    * driver
    * eventbus
    * mq

---
## 文章目录

[领域事件建模](_docs/领域事件建模.md)

[价值需求分析](_docs/05价值需求分析.md)

[同构系统](_docs/07同构系统.md)

[限界上下文](_docs/09限界上下文.md)

[上下文映射](_docs/上下文映射.md)

---
## 资料
[《结构领域驱动设计》张逸](https://book.douban.com/subject/35553520/)